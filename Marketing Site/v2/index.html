<html>
<head>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="jquery.min.js"></script>
  <script src="ft.js"></script>

<script src="waypoint.js"></script>
<link href='https://fonts.googleapis.com/css?family=Raleway:400,800' rel='stylesheet' type='text/css'></head>
<body>

<!--TITLE SECTION-->
<section id="one" class="section">

  <div class="video">
    <video id="bg" src="bg.mp4" preload autoplay muted loop />
</div>

<div class="overlay">
  <h1 id="title">On-Point Uber</h1>
  <h1 id="subtitle">So cool you'll freeze to death</h1>

  <div id="wp" class="wp">
  </div>
</div>

</section>

<!--BULLET POINTS-->
<section id="two" class="section">

<!--LEFT COLLUMN-->
<div class="animation">
  <div class="car" id="car"></div>
  <div class="road"></div>
</div>

<!--RIGHT COLLUMN-->
<div class="content">
<h1 id="info"></br></br>Schedule Ubers <u>On</u> The Daily
</br></br>
Schedule Ubers <u>On</u> Fleek
</br></br>
Schedule Ubers <u>On</u> time
</br></br>
Schedule Ubers <u>Off</u>line
</h1>
</div>

<div id="turn" class="turn"></div>

</section>


<section id="three" class="section">
  <h1>Content</h1>
</section>



<!--WAYPOINT DETECTORS-->
<script type="text/javascript">
var init = 1;

  var waypoint = new Waypoint({
    element: document.getElementById('wp'),
    handler: function(direction) {
      // alert('Basic waypoint triggered')
      if(direction == "down"){
        $("#car").css({"position" : "fixed", "top" : $("#car")[0].getBoundingClientRect().top});
        console.log("triggered - down");
      }
      if(direction == "up"){
        $("#car").css({"position" : "absolute", "top" : "115%"});
        console.log("triggered - up");
      }

    }
  })
var stop = 0;
  var turn = new Waypoint({
    element: document.getElementById('turn'),
    handler: function(direction) {
      if(direction == "down"){
      rotate();
    }
    if(direction == "up"){
      stop=1;
      console.log('stop please');
}
    },
    offset: '60%'
  })

function rotate(){
  var $cog = $('#car'),
    $body = $(document.body),
    bodyHeight = $body.height();

    $(window).scroll(function () {
      if(stop == 0){
    $cog.css({
        'transform': 'rotate(' + (($body.scrollTop() / bodyHeight * 360) -168) + 'deg)',
        'left': (25.2 - (($body.scrollTop() / bodyHeight)*17)) + '%'
    });
    console.log(25.2-($body.scrollTop() / bodyHeight)*17);
}
    if(stop==1){
      $("#car").css({"transform" : "none", "left" : "17%"});
    return;
  }
});
stop = 0;
}
</script>
<!--FITTEXT GENERATORS-->
<script type="text/javascript">
$("#title").fitText();
$("#subtitle").fitText(1.9);
$("#info").fitText(1.5);

</script>

</body>
</html>
